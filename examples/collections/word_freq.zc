
import "std/map.zc"

fn main() {
    var text = "apple banana apple cherry banana apple";
    var delim = " ";
    
    var counts = Map<int>::new();
    defer counts.free();

    var temp = strdup(text);
    defer free(temp);
    
    var token = strtok(temp, delim);
    while token != NULL {
        if counts.contains(token) {
            var val = counts.get(token).unwrap();
            counts.put(token, val + 1);
        } else {
            counts.put(token, 1);
        }
        token = strtok(NULL, delim);
    }

    "Word Frequencies:";
    "-----------------";
    
    for i in 0..counts.capacity() {
        if counts.is_slot_occupied(i) {
            var k = counts.key_at(i);
            var v = counts.val_at(i);
            println "{k}: {v}";
        }
    }
}
